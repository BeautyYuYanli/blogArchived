<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.1.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/uploads/custom-logo.jpg">
  <link rel="icon" type="image/png" sizes="32x32" href="/uploads/custom-logo.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/uploads/custom-logo.jpg">
  <link rel="mask-icon" href="/uploads/custom-logo.jpg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"beautyyu.top","root":"/","scheme":"Gemini","version":"8.0.0-rc.5","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":null,"activeClass":"gitalk"},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}};
  </script>

  <meta name="description" content="热爱ACGN和技术的学生; 谈论设计, 音乐, 自然科学和文学">
<meta property="og:type" content="website">
<meta property="og:title" content="银河美术馆-Beautyyu">
<meta property="og:url" content="http://beautyyu.top/page/5/index.html">
<meta property="og:site_name" content="银河美术馆-Beautyyu">
<meta property="og:description" content="热爱ACGN和技术的学生; 谈论设计, 音乐, 自然科学和文学">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="BeautyYu言醴">
<meta property="article:tag" content="Beautyyu言醴">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://beautyyu.top/page/5/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>银河美术馆-Beautyyu</title>
  






  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="银河美术馆-Beautyyu" type="application/atom+xml"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">银河美术馆-Beautyyu</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Beautyyu言醴的个人独立博客</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-算法">

    <a href="/categories/%E7%AE%97%E6%B3%95" rel="section"><i class="fa fa-terminal fa-fw"></i>算法</a>

  </li>
        <li class="menu-item menu-item-创作">

    <a href="/categories/%E5%88%9B%E4%BD%9C" rel="section"><i class="fa fa-pen fa-fw"></i>创作</a>

  </li>
        <li class="menu-item menu-item-生活">

    <a href="/categories/%E7%94%9F%E6%B4%BB" rel="section"><i class="fa fa-coffee fa-fw"></i>生活</a>

  </li>
        <li class="menu-item menu-item-其他">

    <a href="/categories/%E5%85%B6%E4%BB%96" rel="section"><i class="fa fa-th fa-fw"></i>其他</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">45</span></a>

  </li>
        <li class="menu-item menu-item-关于我">

    <a href="/aboutme/" rel="section"><i class="fa fa-user fa-fw"></i>关于我</a>

  </li>
        <li class="menu-item menu-item-留言板">

    <a href="/messageboard/" rel="section"><i class="fa fa-comment fa-fw"></i>留言板</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <section class="post-toc-wrap sidebar-panel">
      </section>
      <!--/noindex-->

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="BeautyYu言醴"
      src="/uploads/custom-logo.jpg">
  <p class="site-author-name" itemprop="name">BeautyYu言醴</p>
  <div class="site-description" itemprop="description">热爱ACGN和技术的学生; 谈论设计, 音乐, 自然科学和文学</div>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/beautyyuyanli" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;beautyyuyanli" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:beautyyuyanli@gmail.com" title="E-Mail → mailto:beautyyuyanli@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/gpRDv2nEWyWAZug" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;gpRDv2nEWyWAZug" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://space.bilibili.com/10725385" title="Bilibili → https:&#x2F;&#x2F;space.bilibili.com&#x2F;10725385" rel="noopener" target="_blank"><i class="fas fa-tv fa-fw"></i>Bilibili</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://t.me/water_water_water_2077" title="Telegram → https:&#x2F;&#x2F;t.me&#x2F;water_water_water_2077" rel="noopener" target="_blank"><i class="fab fa-telegram fa-fw"></i>Telegram</a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-rss fa-fw"></i>RSS</a>
      </span>
  </div>


  <div class="links-of-blogroll animated">
    <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://www.weisheng.cf/" title="http:&#x2F;&#x2F;www.weisheng.cf" rel="noopener" target="_blank">微笙计协</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://qufy.me/" title="https:&#x2F;&#x2F;qufy.me" rel="noopener" target="_blank">Queensferry</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://qwq.cafe/" title="https:&#x2F;&#x2F;qwq.cafe" rel="noopener" target="_blank">hookan</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://www.juruoyun.top/" title="http:&#x2F;&#x2F;www.juruoyun.top" rel="noopener" target="_blank">蒟蒻云</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://blog.lenva.tech/" title="https:&#x2F;&#x2F;blog.lenva.tech" rel="noopener" target="_blank">过期薯条</a>
        </li>
    </ul>
  </div>

      </section>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/beautyyuyanli" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">
      

      
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://beautyyu.top/2018/09/15/2018-9-15-luogu1268%E6%A0%91%E7%9A%84%E9%87%8D%E9%87%8F%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/custom-logo.jpg">
      <meta itemprop="name" content="BeautyYu言醴">
      <meta itemprop="description" content="热爱ACGN和技术的学生; 谈论设计, 音乐, 自然科学和文学">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="银河美术馆-Beautyyu">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/09/15/2018-9-15-luogu1268%E6%A0%91%E7%9A%84%E9%87%8D%E9%87%8F%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">luogu1268树的重量|题解</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-09-15 00:00:00" itemprop="dateCreated datePublished" datetime="2018-09-15T00:00:00+08:00">2018-09-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">算法</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>本文引用洛谷图床图片可能无法显示,请复制链接至新标签页查看</p>
<blockquote>
<p>树可以用来表示物种之间的进化关系。一棵“进化树”是一个带边权的树，其叶节点表示一个物种，两个叶节点之间的距离表示两个物种的差异。现在，一个重要的问题是，根据物种之间的距离，重构相应的“进化树”。</p>
<p>令N={1..n}，用一个N上的矩阵M来定义树T。其中，矩阵M满足：对于任意的i，j，k，有M[i,j] + M[j,k] &gt;= M[i,k]。树T满足：</p>
<p>1．叶节点属于集合N；</p>
<p>2．边权均为非负整数；</p>
<p>3．dT(i,j)=M[i,j]，其中dT(i,j)表示树上i到j的最短路径长度。</p>
<p>如下图，矩阵M描述了一棵树。</p>
<p><img src="https://cdn.luogu.com.cn/upload/pic/82.png" alt="img"> </p>
<p>树的重量是指树上所有边权之和。对于任意给出的合法矩阵M，它所能表示树的重量是惟一确定的，不可能找到两棵不同重量的树，它们都符合矩阵M。你的任务就是，根据给出的矩阵M，计算M所表示树的重量。下图是上面给出的矩阵M所能表示的一棵树，这棵树的总重量为15。</p>
<p><img src="https://cdn.luogu.com.cn/upload/pic/83.png" alt="img"></p>
</blockquote>
<p>非常巧妙的一道构造题.</p>
<hr>
<p>题面指出 $对于任意的i,j,k 有M[i,j] + M[j,k] \geq M[i,k]$</p>
<p>那么很显然$M$描述的是两点之间的最短路了,也就是$M[i,j]=M[i,lca(i,j)]+M[j,lca(i,j)]$</p>
<hr>
<p>我们取出一个叶子节点$a$,将它作为树根.</p>
<p>接下来我们逐个将叶子加入这颗树里.这个叶子一定会产生一个新枝,我们把这个叶子产生的枝加入答案$ans$</p>
<p>对于第二个叶子$b$,显然它只能直接和$a$连一条边,$ans=M[a,b]$</p>
<p>对于第三个叶子$c$,显然它只能加入链$[a,b]$中,根据$M$的信息我们可以算出$c$产生的枝长度$L$为$(M[a,c]+M[b,c]-M[a,b])/2$,将这个数字加入$ans$</p>
<p>对于第四个叶子$d$,事情就没有这么简单了.它有可能加入链$[a,b]$,分枝长度$L_1$;也有可能加入链$[a,c]$,分枝长度$L_2$.我们分类讨论不同情况:</p>
<ol>
<li>分支点位于$[a,lca(b,c)]$,则$L_1=L_2$</li>
<li>分支点位于$[lca(b,c),b]$,则$L_1$为$d$到$lca(b,d)$的距离;$L_2$为$d$到$lca(c,d)即lca(b,c)$的距离.显然$L_1&lt;L_2$.如果我们认为$L$为$L_2$,那么$lca(b,d)到lca(b,c)$的这一段距离就会重复计算(我们在加入$b$的时候就把这一段加入$ans$了).所以$L$为$L_1$</li>
<li>分支点位于$[lca(b,c),c]$的时候情形同上</li>
</ol>
<p>综上,对于第四个节点,$L=\min(L_1,L_2)$</p>
<p>……</p>
<p>推广到第$n$个节点,$L=\min{L_i}$</p>
<p><img src="https://pics1.beautyyu.top/origin/iaPOOI.png" alt="img"> </p>
<p><img src="https://pics1.beautyyu.top/origin/iaPjmt.png" alt="img"> </p>
<p>图片引自<a target="_blank" rel="noopener" href="https://pics1.beautyyu.top/origin-p1268">TsReaper的博客</a></p>
<hr>
<p>代码如下</p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;cstdlib&gt;
#include &lt;algorithm&gt;
#include &lt;string&gt;
#include &lt;cstring&gt;
#include &lt;cmath&gt;
#define LL int
using namespace std;
LL map_[100][100],len[100],n;
int main()&#123;
        while (1)&#123;
                scanf(&quot;%d&quot;,&amp;n);
                if (n &#x3D;&#x3D; 0)
                        break;
                else &#123;
                        memset(map_,0,sizeof(map_));
                        memset(len,0x3f,sizeof(len));
                        for (LL i &#x3D; 1;i &lt;&#x3D; n;++ i)&#123;
                                for (LL j &#x3D; 1 + i;j &lt;&#x3D; n;++ j)&#123;
                                        scanf(&quot;%d&quot;,&amp;map_[i][j]);
                                        map_[j][i] &#x3D; map_[i][j];
                                &#125;
                        &#125;
                &#125;
                LL ans &#x3D; len[2] &#x3D; map_[1][2];
                for (LL i &#x3D; 3;i &lt;&#x3D; n;++ i)&#123;
                        for (LL j &#x3D; 2;j &lt; i;++ j)&#123;
                                len[i] &#x3D; min(len[i],(map_[i][j] + map_[i][1] - map_[1][j]) &gt;&gt; 1);
                        &#125;
                        ans +&#x3D; len[i];
                &#125;
                printf(&quot;%d\n&quot;,ans);
        &#125;

        return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>文结</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://beautyyu.top/2018/09/04/2018-9-04-NOI2001%E7%82%AE%E5%85%B5%E9%98%B5%E5%9C%B0%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/custom-logo.jpg">
      <meta itemprop="name" content="BeautyYu言醴">
      <meta itemprop="description" content="热爱ACGN和技术的学生; 谈论设计, 音乐, 自然科学和文学">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="银河美术馆-Beautyyu">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/09/04/2018-9-04-NOI2001%E7%82%AE%E5%85%B5%E9%98%B5%E5%9C%B0%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">NOI2001炮兵阵地|题解</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-09-04 00:00:00" itemprop="dateCreated datePublished" datetime="2018-09-04T00:00:00+08:00">2018-09-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">算法</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>司令部的将军们打算在N<em>M的网格地图上部署他们的炮兵部队。一个N</em>M的地图由N行M列组成，地图的每一格可能是山地（用“H”  表示），也可能是平原（用“P”表示），如下图。在每一格平原地形上最多可以布置一支炮兵部队（山地上不能够部署炮兵部队）；一支炮兵部队在地图上的攻击范围如图中黑色区域所示：</p>
<p><img src="https://pics1.beautyyu.top/origin/origin.png" alt="img"> </p>
<p>如果在地图中的灰色所标识的平原上部署一支炮兵部队，则图中的黑色的网格表示它能够攻击到的区域：沿横向左右各两格，沿纵向上下各两格。图上其它白色网格均攻击不到。从图上可见炮兵的攻击范围不受地形的影响。   现在，将军们规划如何部署炮兵部队，在防止误伤的前提下（保证任何两支炮兵部队之间不能互相攻击，即任何一支炮兵部队都不在其他支炮兵部队的攻击范围内），在整个地图区域内最多能够摆放多少我军的炮兵部队。</p>
</blockquote>
<p>是一道经典的状压dp题,很可惜代码丑得自己都看不下去..</p>
<p>设$f(i,S_{self},S_{father})$为考虑前i行,第i行状态为$S_{self}$,第i-1行状态为$S_{father}$时的最优解</p>
<p>设$cnt(S)$为状态$S$上放置炮兵的数量</p>
<p>转移方程为<br>$$<br>f(i,S_{self},S_{father})=max{f(i-1,S_{father},S_{grandfather})+cnt(S_{self})}<br>$$<br>按顺序枚举$S_{self},S_{father},S_{grandfather}$进行转移,枚举时应当保证三个$S$互不冲突且对于地形合法</p>
<p>注意两点:</p>
<ol>
<li>要考虑$S$可以为空集,即该行不放炮兵</li>
<li>注意滚动数组优化,否则空间不足</li>
</ol>
<p>代码如下</p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;cstdlib&gt;
#include &lt;cmath&gt;
#include &lt;cstring&gt;
#include &lt;string&gt;
#include &lt;algorithm&gt;
#include &lt;ctime&gt;
#define LL int 
using namespace std;
LL map_[200],dp[2][2000][2000],p &#x3D; 0;
LL cal(LL se)&#123;
        LL cnt &#x3D; 0;
        while (se)&#123;
                se -&#x3D; se&amp;(-se);
                cnt ++;
        &#125;
        return cnt;
&#125;
int main()&#123;
        LL n,m;
        cin &gt;&gt; n &gt;&gt; m;
        for (LL i &#x3D; 1;i &lt;&#x3D; n;++ i)&#123;
                map_[i] &#x3D; 0;
                for (LL j &#x3D; 1;j &lt;&#x3D; m;++ j)&#123;
                        char al &#x3D; getchar();
                        while (al !&#x3D; &#39;P&#39; &amp;&amp; al !&#x3D; &#39;H&#39;) al &#x3D; getchar();
                        map_[i] &lt;&lt;&#x3D; 1;
                        if (al &#x3D;&#x3D; &#39;P&#39;)
                                map_[i] |&#x3D; 1;
                &#125;
        &#125;
        memset(dp,0,sizeof(dp));
        for (LL s &#x3D; map_[1];s;s &#x3D; (s - 1) &amp; map_[1])&#123;
                if (((s &lt;&lt; 1) &amp; s) || ((s &lt;&lt; 2) &amp; s))
                        continue;
                dp[0][0][s] &#x3D; cal(s);
        &#125;
        for (LL k &#x3D; 2;k &lt;&#x3D; n;++ k)&#123;
                p &#x3D; !p;
                for (LL se &#x3D; map_[k];se!&#x3D;-1;se &#x3D; se?(se - 1) &amp; map_[k]:-1)&#123;
                        if (((se &lt;&lt; 1) &amp; se) || ((se &lt;&lt; 2) &amp; se))
                                continue;
                        LL cal_se &#x3D; cal(se);
                        LL tmp &#x3D; map_[k - 1]&amp;(~se);
                        for (LL fa &#x3D; tmp;fa!&#x3D;-1;fa &#x3D; fa?(fa - 1) &amp; tmp:-1)&#123;
                                dp[p][fa][se] &#x3D; 0;
                                if (((fa &lt;&lt; 1) &amp; fa) || ((fa &lt;&lt; 2) &amp; fa))
                                        continue;
                                LL tmp1 &#x3D; map_[k - 2]&amp;(~fa)&amp;(~se);
                                for (LL gfa &#x3D; tmp1;gfa!&#x3D;-1;gfa &#x3D; gfa?(gfa - 1) &amp; tmp1:-1)&#123;
                                        if (((gfa &lt;&lt; 1) &amp; gfa) || ((gfa &lt;&lt; 2) &amp; gfa))
                                                continue;
                                        dp[p][fa][se] &#x3D; max(dp[p][fa][se],dp[!p][gfa][fa]+cal_se);
                                &#125;
                        &#125;
                &#125;
        &#125;
        LL ans &#x3D; 0;
        for (LL se &#x3D; map_[n];se!&#x3D;-1;se &#x3D; se?(se - 1) &amp; map_[n]:-1)&#123;
                if (((se &lt;&lt; 1) &amp; se) || ((se &lt;&lt; 2) &amp; se))
                        continue;
                LL tmp &#x3D; map_[n-1]&amp;(~se);
                for (LL fa &#x3D; tmp;fa !&#x3D; -1;fa &#x3D; fa?(fa - 1) &amp; tmp:-1)&#123;
                        if (((fa &lt;&lt; 1) &amp; fa) || ((fa &lt;&lt; 2) &amp; fa))
                                continue;
                        ans &#x3D; max(ans,dp[p][fa][se]);
                &#125;
        &#125;
        cout &lt;&lt; ans;

        return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>文结</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://beautyyu.top/2018/09/04/2018-9-04-SDOI2009_SuperGCD%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/custom-logo.jpg">
      <meta itemprop="name" content="BeautyYu言醴">
      <meta itemprop="description" content="热爱ACGN和技术的学生; 谈论设计, 音乐, 自然科学和文学">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="银河美术馆-Beautyyu">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/09/04/2018-9-04-SDOI2009_SuperGCD%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">SDOI2009_SuperGCD|题解</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-09-04 00:00:00" itemprop="dateCreated datePublished" datetime="2018-09-04T00:00:00+08:00">2018-09-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">算法</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>一道恶心人的毒瘤题:高精度gcd</p>
<p>注意到,<strong>在高精度运算中取模是通过重复相减实现的</strong></p>
<p>所以对于高精度gcd,<strong>辗转相除法和更相减损术是一样的</strong></p>
<p>那档燃是写<strong>更相减损术</strong>啦</p>
<p>这毒瘤题还卡常,所以就搞了几个小把戏:</p>
<ol>
<li>把高精度减法直接重载为<code>-=</code></li>
<li>采取亿进制(事实上甚至可以写成万亿进制)</li>
</ol>
<p>不得不说高精度运算是很坑的算法,建议除了<code>构造函数</code>和重载<code>赋值符</code>之外所有成员函数都应该用<code>const</code>修饰</p>
<p>以及亿进制下的输出也是一个很麻烦的事情…</p>
<p>代码如下</p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;cstdlib&gt;
#include &lt;cmath&gt;
#include &lt;cstring&gt;
#include &lt;string&gt;
#include &lt;algorithm&gt;
#include &lt;ctime&gt;
#define LL long long
using namespace std;
struct big_int&#123;
        LL data[25000],len;
        big_int(char *al)&#123;
                LL al_len &#x3D; strlen(al),base &#x3D; 1;
                data[len &#x3D; 0] &#x3D; 0;
                for (LL p &#x3D; al_len - 1;p &gt;&#x3D; 0;p --)&#123;
                        if (base &gt;&#x3D; 100000000)
                                ++ len,data[len] &#x3D; 0,base &#x3D; 1;
                        data[len] +&#x3D; (al[p] - &#39;0&#39;) * base;
                        base *&#x3D; 10;
                &#125;
                len ++;
                return ;
        &#125;
        void print()const&#123;
                LL len &#x3D; this-&gt;len;
                if (!len) &#123;
                        cout &lt;&lt;&quot;0\n&quot;;
                        return ;
                &#125;
                len --;
                LL b &#x3D; 10000000;
                while((data[len] &#x2F; b) &#x3D;&#x3D; 0)
                        b &#x2F;&#x3D; 10;
                printf(&quot;%lld&quot;,data[len]);
                string out &#x3D; &quot;&quot;;
                for (LL i &#x3D; len - 1;i &gt;&#x3D; 0;-- i)&#123;
                        LL b &#x3D; 10000000,d &#x3D; data[i];
                        while(b)&#123;
                                out +&#x3D; d &#x2F; b + &#39;0&#39;;
                                d %&#x3D; b;
                                b &#x2F;&#x3D; 10;
                        &#125;
                &#125;
                cout &lt;&lt; out &lt;&lt; endl;
                return ;
        &#125;
        bool operator &lt; (const big_int &amp;al)const&#123;
                if (len !&#x3D; al.len)
                        return len &lt; al.len;
                for (LL i &#x3D; len - 1;i &gt;&#x3D; 0;-- i)
                        if (data[i] !&#x3D; al.data[i])
                                return data[i] &lt; al.data[i];
                return 0;
        &#125;
        big_int operator -&#x3D; (big_int &amp;al)&#123;
                for (LL i &#x3D; 0;i &lt; al.len;++ i)
                        data[i] -&#x3D; al.data[i];
                for (LL i &#x3D; 0;i &lt; len;++ i)
                        if (data[i] &lt; 0)
                                data[i] +&#x3D; 100000000,
                                data[i + 1] -&#x3D; 1;
                while (data[-- len] &#x3D;&#x3D; 0 &amp;&amp; len &gt; 0);
                len ++; 
                if (len &#x3D;&#x3D; 1 &amp;&amp; data[0] &#x3D;&#x3D; 0)
                        len &#x3D; 0;
                return *this;
        &#125;
&#125;;
LL low_gcd(LL a,LL b)&#123;
        return b?low_gcd(b,a % b):a;
&#125;
int main()&#123;
        char alpha[20000],beta[20000];
        scanf(&quot;%s%s&quot;,alpha,beta);
        if (strlen(alpha) &lt;&#x3D; 18 &amp;&amp; strlen(beta) &lt;&#x3D; 18)&#123;
                LL al,be;
                sscanf(alpha,&quot;%lld&quot;,&amp;al);
                sscanf(beta ,&quot;%lld&quot;,&amp;be);
                cout &lt;&lt; low_gcd(al,be);
        &#125;
        else&#123;
                big_int al &#x3D; big_int(alpha),be &#x3D; big_int(beta);
                while (al &lt; be || be &lt; al)&#123;
                        if (be &lt; al)
                                al -&#x3D; be;
                        else
                                be -&#x3D; al;
                &#125;
                al.print();
        &#125;
        return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>文结</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://beautyyu.top/2018/08/01/2018-8-1-cf-r500-div2-d%E9%A2%98ChemicalTable%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/custom-logo.jpg">
      <meta itemprop="name" content="BeautyYu言醴">
      <meta itemprop="description" content="热爱ACGN和技术的学生; 谈论设计, 音乐, 自然科学和文学">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="银河美术馆-Beautyyu">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/08/01/2018-8-1-cf-r500-div2-d%E9%A2%98ChemicalTable%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">cf-r500-div2-d题ChemicalTable|题解</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-08-01 00:00:00" itemprop="dateCreated datePublished" datetime="2018-08-01T00:00:00+08:00">2018-08-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">算法</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>Innopolis University scientists continue to investigate the periodic table. There are <em>n</em>·<em>m</em> known elements and they form a periodic table: a rectangle with <em>n</em> rows and <em>m</em> columns. Each element can be described by its coordinates (<em>r</em>, <em>c</em>) (1 ≤ <em>r</em> ≤ <em>n</em>, 1 ≤ <em>c</em> ≤ <em>m</em>) in the table.</p>
<p>Recently  scientists discovered that for every four different elements in this  table that form a rectangle with sides parallel to the sides of the  table, if they have samples of three of the four elements, they can  produce a sample of the fourth element using nuclear fusion. So if we  have elements in positions (<em>r</em>1, <em>c</em>1), (<em>r</em>1, <em>c</em>2), (<em>r</em>2, <em>c</em>1), where <em>r</em>1 ≠ <em>r</em>2 and <em>c</em>1 ≠ <em>c</em>2, then we can produce element (<em>r</em>2, <em>c</em>2).</p>
<p><img src="https://espresso.codeforces.com/2aad7759be953a55c88f692b50d56d7eeaf2b106.png" alt="img"> </p>
<p>Samples  used in fusion are not wasted and can be used again in future fusions.  Newly crafted elements also can be used in future fusions.</p>
<p>Innopolis University scientists already have samples of <em>q</em> elements. They want to obtain samples of all <em>n</em>·<em>m</em>  elements. To achieve that, they will purchase some samples from other  laboratories and then produce all remaining elements using an arbitrary  number of nuclear fusions in some order. Help them to find the minimal  number of elements they need to purchase.</p>
</blockquote>
<p>先下一个定义:</p>
<ul>
<li>联通矩阵:若有一个元素组成的集合,集合内任意一个元素都<strong>已存在</strong>或<strong>可以由同集合已存在的元素合成</strong>.显然这个集合最大时是一个(不一定连续的)矩阵形状,称<strong>联通矩阵</strong></li>
</ul>
<p>观察联通矩阵的性质</p>
<ul>
<li>若有两联通矩阵A,B.其中分别有两元素a,b.这两个元素在同一行(或同一列)时,两矩阵可以合成一个更大联通矩阵C.C的左边界为A,B左边界较小的一个,C的右边界为A,B右边界较大的一个.上下边界同理</li>
<li>若整张地图共有k个联通矩阵(当然它们两两之间无法合并),则只需添加k-1个元素就可以使整张地图联通</li>
</ul>
<p>接着逐行模拟合并联通矩阵的过程</p>
<ul>
<li>考虑前i-1行,若有一个联通矩阵A,包含$J_1,J_2,…,J_k$几个列.第i行存在任意一个元素$(i,J_t),J_t属于J$,则所有$(i,J_1),(i,J_2),…,(i,J_k)$加入矩阵A</li>
<li>考虑前i-1行,若有两个联通矩阵$A={J_{A1},J_{A2},…,J_{Ak}}$,$B={J_{B1},J_{B2},…,J_{Bk}}$,第i行存在两元素$(i,J_{At})$,$(i,J_{Bt})$,$J_{At}属于J_A,J_{Bt}属于J_B$,则将AB合并为一个矩阵</li>
<li>当然以本题规模无法存下整个矩阵.由于我们是逐行枚举的,所以只要存储矩阵中的所有列就可以代表一个<em>包含以上所有行与这些列的交点</em>的联通矩阵了</li>
<li>值得注意的是:用列来表示不会忽略空列,但是会忽略空行.因此应当加上所有空行的数量(显然在一个空行上任意添加一个元素就可以将整个行加入矩阵)</li>
<li>显然以上说的这些应该用并查集维护</li>
</ul>
<p>以下是代码:</p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;cstdlib&gt;
#include &lt;cstring&gt;
#include &lt;string&gt;
#include &lt;cmath&gt;
#include &lt;algorithm&gt;
#define llint long long
using namespace std;
struct coo&#123;
    int x,y;
    bool operator &lt; (const coo &amp;be)const&#123;
        if (x !&#x3D; be.x) return x &lt; be.x;
        else return y &lt; be.y;
    &#125;
&#125;arr[400000];
&#x2F;&#x2F;set
int fa[400000];
int set_(int k)&#123;
    if (k &#x3D;&#x3D; fa[k]) return k;
    else return fa[k] &#x3D; set_(fa[k]);
&#125;
int merge(int k,int l)&#123;
    fa[set_(k)] &#x3D; set_(l);
    return set_(k);
&#125;
int main ()&#123;
    int n,m,k,ans &#x3D; 0;
    cin &gt;&gt; n &gt;&gt; m &gt;&gt; k;
    for (int i &#x3D; 1;i &lt;&#x3D; k;++ i)&#123;
        scanf(&quot;%d%d&quot;,&amp;arr[i].x,&amp;arr[i].y);
    &#125;
    sort(arr + 1,arr + 1 + k);
    for (int i &#x3D; 1;i &lt;&#x3D; m;++ i)
        fa[i] &#x3D; i;
    int p &#x3D; 0,cnt &#x3D; 0;
    bool ifcnt &#x3D; 0;
    for (int i &#x3D; 1;i &lt;&#x3D; n;++ i)&#123;
        int f &#x3D; 0;
        while (++p &lt;&#x3D; k &amp;&amp; arr[p].x &#x3D;&#x3D; i)&#123;
            ifcnt &#x3D; 1;
            int &amp;y &#x3D; arr[p].y;
            if (!f) f &#x3D; set_(y);
            else merge(y,f);
        &#125;
        if (!ifcnt) ++ cnt;
        ifcnt &#x3D; 0;
        p --;
    &#125;
    int f &#x3D; set_(1);
    for (int i &#x3D; 2;i &lt;&#x3D; m;++ i)&#123;
        if (set_(f) !&#x3D; set_(i)) &#123;
            ++ ans;
            f &#x3D; merge(f,set_(i));
        &#125;
    &#125;
    cout &lt;&lt; ans + cnt;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>以上.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://beautyyu.top/2018/07/23/2018-7-23-ZJOI2005%E5%8D%88%E9%A4%90%E9%A2%98%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/custom-logo.jpg">
      <meta itemprop="name" content="BeautyYu言醴">
      <meta itemprop="description" content="热爱ACGN和技术的学生; 谈论设计, 音乐, 自然科学和文学">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="银河美术馆-Beautyyu">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/07/23/2018-7-23-ZJOI2005%E5%8D%88%E9%A4%90%E9%A2%98%E8%A7%A3/" class="post-title-link" itemprop="url">ZJOI2005午餐|题解</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-07-23 12:12:12" itemprop="dateCreated datePublished" datetime="2018-07-23T12:12:12+08:00">2018-07-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">算法</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>上午的训练结束了，THU  ACM小组集体去吃午餐，他们一行N人来到了著名的十食堂。这里有两个打饭的窗口，每个窗口同一时刻只能给一个人打饭。由于每个人的口味（以及胃口）不同，所以他们要吃的菜各有不同，打饭所要花费的时间是因人而异的。另外每个人吃饭的速度也不尽相同，所以吃饭花费的时间也是可能有所不同的。</p>
<p>THU ACM小组的吃饭计划是这样的：先把所有的人分成两队，并安排好每队中各人的排列顺序，然后一号队伍到一号窗口去排队打饭，二号队伍到二号窗口去排队打饭。每个人打完饭后立刻开始吃，所有人都吃完饭后立刻集合去六教地下室进行下午的训练。</p>
<p>现在给定了每个人的打饭时间和吃饭时间，要求安排一种最佳的分队和排队方案使得所有人都吃完饭的时间尽量早。</p>
<p>假设THU ACM小组在时刻0到达十食堂，而且食堂里面没有其他吃饭的同学（只有打饭的师傅）。每个人必须而且只能被分在一个队伍里。两个窗口是并行操作互不影响的，而且每个人打饭的时间是和窗口无关的，打完饭之后立刻就开始吃饭，中间没有延迟。</p>
<p>现在给定N个人各自的打饭时间和吃饭时间，要求输出最佳方案下所有人吃完饭的时刻。</p>
</blockquote>
<p>显然吃饭慢的应该先排队,满足贪心</p>
<p>可以设计状态dp(l1,l2)表示队伍长度分别为l1,l2时的最短时间</p>
<p>但是注意到两个队伍的长度是分别变化的,所以状态应当同时维护两队的进食总时间</p>
<p>转移方程见代码</p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;cstdlib&gt;
#include &lt;cstring&gt;
#include &lt;string&gt;
#include &lt;algorithm&gt;
#include &lt;cmath&gt;
#define llint long long
using namespace std;
struct xxx&#123;
    int a,b;
    bool operator &lt; (const xxx &amp;be)const&#123;
        return b &gt; be.b;
    &#125;
&#125;arr[300];
struct yyy&#123;
    int p1,p2;
&#125;___[100000],*dp &#x3D; ___ + 50000;
int main ()&#123;
    int n;
    cin &gt;&gt; n ;
    for (int i &#x3D; 1;i &lt;&#x3D; n;++ i)
        scanf(&quot;%d%d&quot;,&amp;arr[i].a,&amp;arr[i].b);
    sort (arr + 1,arr + 1 + n);
    for (int i &#x3D; -45000;i &lt; 45000;++ i)
        dp[i].p1 &#x3D; dp[i].p2 &#x3D; 0x3f3f3f3f;
    dp[0] &#x3D; yyy&#123;0,0&#125;;
    int sum_ &#x3D; 0;
    for (int i &#x3D; 1;i &lt;&#x3D; n;++ i)&#123;
        sum_ +&#x3D; arr[i].a;
        for (int l1 &#x3D; sum_;l1 &gt;&#x3D; 0;-- l1)&#123;
            int l2 &#x3D; sum_ - l1;
            int 
                tmp1_p1 &#x3D; max(dp[l1 - arr[i].a].p1,l1 + arr[i].b),
                        tmp1_p2 &#x3D; dp[l1 - arr[i].a].p2, 
                        tmp2_p1 &#x3D; dp[l1].p1,
                        tmp2_p2 &#x3D; max(dp[l1].p2,l2 + arr[i].b);
            if (max(tmp1_p1,tmp1_p2) &lt; max(tmp2_p1,tmp2_p2))&#123;
                dp[l1] &#x3D; yyy&#123;tmp1_p1,tmp1_p2&#125;;
            &#125;
            else &#123;
                dp[l1] &#x3D; yyy&#123;tmp2_p1,tmp2_p2&#125;;
            &#125;
        &#125;

    &#125;
    int ans &#x3D; 0x3f3f3f3f;
    for (int i &#x3D; 0;i &lt;&#x3D; sum_;++ i)
        ans &#x3D; min(max(dp[i].p1,dp[i].p2),ans);
    cout &lt;&lt; ans;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>以上.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



      

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

    </div>
  </main>

  <footer class="footer">
    <div class="footer-inner">
      

      

<div class="copyright">
  
  &copy; 2017 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">BeautyYu言醴</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.2.0/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  




  <script src="/js/local-search.js"></script>












  








  

  
      <script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              const target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      const script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3.1.0/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.typesetClear();
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  


<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/haru02.model.json"},"display":{"position":"right","width":275,"height":700},"mobile":{"show":false},"log":false,"tagMode":false});</script><!-- hexo-inject:begin --><!-- hexo-inject:end --></body>
</html>
